<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Admin Dashboard</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<!-- Bootstrap Icons -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
	<!-- Your Sidebar CSS -->
	<link th:href="@{/css/admin-css/admin_sidebar.css}" rel="stylesheet">

	<style>
		.home-section .table {
			--bs-table-bg: transparent;
			--bs-table-striped-bg: rgba(255, 255, 255, 0.025);
			--bs-table-hover-bg: rgba(59, 130, 246, 0.08);
			--bs-table-color: #d1d5db;
			--bs-table-border-color: rgba(255, 255, 255, 0.08);
		}

		/* Force cells to obey variables */
		.home-section .table>:not(caption)>*>* {
			background-color: transparent !important;
		}

		/* Table wrapper spacing */
		.home-section .table {
			margin-top: 1.5rem;
			border-collapse: separate;
			border-spacing: 0;
			background: rgba(255, 255, 255, 0.03);
			color: #eaeaf0;
			border-radius: 0.75rem;
			overflow: hidden;
		}

		/* Table header */
		.home-section .table thead {
			background: rgba(255, 255, 255, 0.06);
		}

		.home-section .table thead th {
			color: #eaeaf0;
			font-weight: 600;
			font-size: 0.9rem;
			border-bottom: 1px solid rgba(255, 255, 255, 0.12);
			text-align: center;
		}

		/* Table body cells */
		.home-section .table tbody td {
			color: #d1d5db;
			font-size: 0.88rem;
			vertical-align: middle;
			border-top: 1px solid rgba(255, 255, 255, 0.08);
			text-align: center;
		}

		/* Zebra striping (override bootstrap) */
		.home-section .table-striped>tbody>tr:nth-of-type(odd) {
			background-color: rgba(255, 255, 255, 0.025);
		}

		/* Hover effect */
		.home-section .table tbody tr:hover {
			background-color: rgba(59, 130, 246, 0.08);
			transition: background 0.2s ease;
		}

		/* Borders */
		.home-section .table-bordered {
			border: 1px solid rgba(255, 255, 255, 0.12);
		}

		.home-section .table-bordered th,
		.home-section .table-bordered td {
			border: 1px solid rgba(255, 255, 255, 0.08);
		}

		/* ================================
   ACTION BUTTONS
================================ */
		.home-section .btn-danger {
			background: rgba(239, 68, 68, 0.85);
			border: none;
			font-size: 0.75rem;
			padding: 0.3rem 0.6rem;
			border-radius: 0.4rem;
		}

		.home-section .btn-danger:hover {
			background: rgb(239, 68, 68);
		}

		/* ================================
   STATUS SELECT (GLASS STYLE)
================================ */
		.status-select {
			background: rgba(255, 255, 255, 0.06);
			border: 1px solid rgba(255, 255, 255, 0.15);
			color: #e5e7eb;
			font-size: 0.75rem;
			padding: 0.35rem 0.5rem;
			border-radius: 0.45rem;
			backdrop-filter: blur(6px);
			min-width: 110px;
		}

		.status-select:focus {
			outline: none;
			border-color: #3b82f6;
			box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.25);
		}

		/* Dropdown options */
		.status-select option {
			background: #0f172a;
			color: #e5e7eb;
		}

		/* ================================
   INSTRUCTOR CELL
================================ */
		/* ================================
   INSTRUCTOR CELL FIX
================================ */
		.instructor-cell {
		
			align-items: center;
			justify-content: center;
			gap: 0.35rem;
			padding: 0.25rem 0.5rem !important;
			/* ðŸ”¥ reduce cell padding */
			line-height: 1.1;
			/* ðŸ”¥ tighter text */
			min-height: auto;
			/* safety */
		}

		.by-label {
			font-size: 0.7rem;
			text-transform: uppercase;
			letter-spacing: 0.06em;
			color: #9ca3af;
			margin: 0;
			/* important */
			padding: 0;
			line-height: 1;
		}

		.instructor-name {
			font-size: 0.85rem;
			font-weight: 600;
			color: #e5e7eb;
			margin: 0;
			line-height: 1.1;
		}

		/* ================================
   COURSE STATS (MODULES / LESSONS)
================================ */
		.course-stats {
			display: flex;
			gap: 0.35rem;
			justify-content: center;
			flex-wrap: wrap;
		}

		.course-stats .stat {
			display: flex;
			align-items: center;
			gap: 0.35rem;
			padding: 0.25rem 0.5rem;
			border-radius: 0.45rem;
			font-size: 0.7rem;
			background: rgba(255, 255, 255, 0.06);
			border: 1px solid rgba(255, 255, 255, 0.12);
			color: #e5e7eb;
			backdrop-filter: blur(6px);
		}

		.course-stats .stat i {
			font-size: 0.8rem;
			opacity: 0.85;
		}

		.course-stats .stat span {
			font-weight: 600;
		}

		.course-stats .stat small {
			font-size: 0.65rem;
			opacity: 0.7;
		}

		/* Color hints */
		.stat-mod {
			border-left: 3px solid #3b82f6;
		}

		.stat-les {
			border-left: 3px solid #22c55e;
		}

		.stat-quiz {
			border-left: 3px solid #eab308;
		}

		.home-section td .btn {
			margin: 0 0.15rem;
		}

		/* ================================
   RESPONSIVE FIX
================================ */
		@media (max-width : 768px) {
			.home-section .table {
				font-size: 0.8rem;
			}
		}
	</style>
</head>

<body>
	<div class="layout">

		<!-- ===== SIDEBAR ===== -->
		<aside class="vertical-sidebar">
			<input type="checkbox" id="sidebar-toggle" class="checkbox-input" checked>
			<nav>
				<header>
					<div class="sidebar__toggle-container">
						<label for="sidebar-toggle" class="nav__toggle" tabindex="0">
							<span class="toggle--icons"> <i class="bi bi-list toggle--open"></i><i
									class="bi bi-x-lg toggle--close"></i>
							</span>
						</label>
					</div>
					<figure>
						<img class="codepen-logo" th:src="@{/images/admin-avatar.png}" alt="Admin">
						<figcaption>
							<p class="user-id" th:text="${username}">Admin</p>
							<p class="user-role">Administrator</p>
						</figcaption>
					</figure>
				</header>

				<section class="sidebar__wrapper">
					<ul class="sidebar__list">
						<li class="sidebar__item item--heading">
							<h2 class="sidebar__item--heading">General</h2>
						</li>

		  <li class="sidebar__item"><a th:href="@{/admin-dashboard}"><i class="bi bi-speedometer2"></i><span>Dashboard</span></a></li>
          <li class="sidebar__item"><a th:href="@{/manage-students}"><i class="bi bi-people"></i><span>Student Management</span></a></li>
          <li class="sidebar__item"><a th:href="@{/manage-teachers}"><i class="bi bi-person-badge"></i><span>Instructor Management</span></a></li>
          <li class="sidebar__item"><a th:href="@{/manage-courses}" class="active"><i class="bi bi-book"></i><span>Course Management</span></a></li>
          <li class="sidebar__item"><a th:href="@{/manage-internships}"><i class="bi bi-briefcase"></i><span>Internship Management</span></a></li>
          <li class="sidebar__item"><a th:href="@{/admin-design}"><i class="bi bi-layout-text-window"></i><span>Certificate Design</span></a></li>
          <li class="sidebar__item"><a th:href="@{/admin-feedback}"><i class="bi bi-bar-chart"></i><span>Feedback</span> </a></li>
          <li class="sidebar__item"><a th:href="@{/admin-settings}"><i class="bi bi-gear"></i><span>Settings</span></a></li>
          <li class="sidebar__item"><a th:href="@{/admin-logout}"><i class="bi bi-box-arrow-right"></i><span>Logout</span></a></li>
          
					</ul>
				</section>
			</nav>
		</aside>

		<!-- ===== CONTENT AREA ===== -->
		<div class="content-area">
			<!-- ===== TOPBAR ===== -->
			<header class="topbar">
				<span class="page-title"></span>
				<div class="topbar-right">
					<button class="profile-btn dropdown-toggle" data-bs-toggle="dropdown">
						<img th:src="@{/images/admin-avatar.png}" alt="Admin" class="avatar"> <span
							th:text="${username}">Admin</span>
					</button>
				</div>
			</header>

			<!-- ===== MAIN CONTENT ===== -->
			<main class="home-section">
				<h1>Manage Courses (Delete & View)</h1>
				<p>
					Welcome, <span th:text="${username}">Admin</span>
				</p>

				<table class="table table-bordered table-striped align-middle mt-3">
					<thead class="table-dark">
						<tr>
							<th>#</th>
							<th>Course Name</th>
							<th>Instructor</th>
							<th>Status</th>
							<th>Type / Price</th>
							<th>Modules / Lessons</th>
							<th>Actions</th>
						</tr>
					</thead>

					<tbody>
						<tr th:each="course, stat : ${courses}" th:id="'course-' + ${course.courseId}">

							<!-- Index -->
							<td th:text="${stat.index + 1}"></td>

							<!-- Course Title -->
							<td th:text="${course.title}"></td>

							<!-- Teacher -->
							<td class="instructor-cell"><span class="by-label">by</span>
								<span class="instructor-name" th:text="${course.instructorName}"></span>
							</td>

							<!-- Status -->
							<td>
								<form th:action="@{/manage-course/status/{id}(id=${course.courseId})}" method="post"
									class="d-flex gap-1 align-items-center">

									<select name="status" class="status-select">
										<option value="DRAFT" th:selected="${course.status.name() == 'DRAFT'}">Draft
										</option>
										<option value="PUBLISHED" th:selected="${course.status.name() == 'PUBLISHED'}">
											Published</option>
										<option value="DELETED" th:selected="${course.status.name() == 'DELETED'}">
											Deleted</option>
										<option value="BLOCKED" th:selected="${course.status.name() == 'BLOCKED'}">
											Blocked</option>
									</select>

									<button class="btn btn-success btn-sm">
										<i class="bi bi-check"></i>
									</button>
								</form>
							</td>

							<!-- Type / Price -->
							<td><span class="fw-semibold text-uppercase" th:text="${course.type}"></span> <span
									th:if="${course.type.name() == 'paid'}"> - â‚¹<span th:text="${course.price}"></span>
								</span> <span th:if="${course.type.name() == 'free'}"> - Free </span></td>
							<td>
								<div class="course-stats">
									<span class="stat stat-mod"> <i class="bi bi-box"></i> <span
											th:text="${course.moduleCount}"></span> <small>Modules</small>
									</span> <span class="stat stat-les"> <i class="bi bi-play-circle"></i> <span
											th:text="${course.lessonCount}"></span> <small>Lessons</small>
									</span> <span class="stat stat-quiz"> <i class="bi bi-patch-question"></i> <span
											th:text="${course.quizCount}"></span> <small>Quizzes</small>
									</span>
								</div>
							</td>
							<!-- Actions -->
							<td>
								<!-- View --> <a th:href="@{/admin-course/view/{id}(id=${course.courseId})}"
									class="btn btn-info btn-sm" title="View Course"> <i class="bi bi-eye"></i>
								</a> <!-- Delete -->
								<form th:action="@{/manage-course/delete/{id}(id=${course.courseId})}" method="post"
									class="d-inline" onsubmit="return confirm('Mark this course as deleted?');">
									<button type="submit" class="btn btn-danger btn-sm" title="Delete Course">
										<i class="bi bi-trash"></i>
									</button>
								</form>
							</td>
						</tr>
					</tbody>
				</table>


			</main>
		</div>

	</div>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>