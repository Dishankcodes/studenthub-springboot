<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Teacher Dashboard</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<link rel="stylesheet" th:href="@{/css/teacher-css/teacher-sidebar.css}">
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: 'Poppins', sans-serif;
		}

		body {
			background: #f4f6f9;
		}


		.main-content {
			margin-left: 260px;
			padding: 20 30px;
			transition: margin-left 0.3s ease;
		}

		/* When sidebar is collapsed */
		body.sidebar-collapsed .main-content {
			margin-left: 80px;
		}


		.page-title {
			font-size: 28px;
			font-weight: 600;
			margin-top: 30px;
			margin-left: 20px;
		}

		/* ===== PAGE HEADER ===== */
		/* ===== Layout ===== */
		.dashboard {
			padding: 30px;
		}

		.section-title {
			margin: 30px 0 15px;
			font-size: 22px;
			font-weight: 600;
		}

		/* ===== DASHBOARD CARD ===== */
		.card {
			background: #ffffff;
			border-radius: 14px;
			padding: 22px;
			box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
		}

		/* ===== TABLE BASE ===== */
		table {
			width: 100%;
			border-collapse: separate;
			border-spacing: 0;
			font-size: 14.5px;
		}

		/* ===== TABLE HEADER ===== */
		thead th {
			position: sticky;
			top: 0;
			background: #f9fafb;
			color: #374151;
			font-weight: 600;
			padding: 14px 16px;
			border-bottom: 2px solid #e5e7eb;
			text-transform: uppercase;
			font-size: 12.5px;
			letter-spacing: 0.4px;
		}

/* ===============================
   DARK TABLE THEME (FINAL)
================================ */
table {
    width: 100%;
    border-collapse: collapse;
    background: #2a2a4a;
    color: #ffffff;
    border-radius: 12px;
    overflow: hidden;
}

/* ===== TABLE HEADER ===== */
thead th {
    background: #1f1f35;
    color: #ffffff;
    font-weight: 600;
    padding: 14px 16px;
    text-transform: uppercase;
    font-size: 12.5px;
    letter-spacing: 0.4px;
    border-bottom: 1px solid #3c3c5c;
}

/* ===== TABLE ROWS ===== */
tbody tr {
    transition: background 0.2s ease;
}

tbody tr:nth-child(even) {
    background: #24243a;
}

tbody tr:hover {
    background: #f6a623;
    color: #1f1f2e;
}

/* ===== TABLE CELLS ===== */
td {
    padding: 14px 16px;
    vertical-align: middle;
    color: inherit;
}

/* Student email */
td small {
    color: #c7c7d1;
}

/* Completed date */
.status-complete {
    color: #22c55e;
    font-weight: 600;
}

/* In progress */
.status-progress {
    color: #facc15;
    font-style: italic;
}

/* Empty state */
tbody tr td[colspan] {
    text-align: center;
    padding: 30px;
    font-size: 14px;
    color: #c7c7d1;
}
	

		/* ===============================
   DARK DROPDOWN (STATUS)
================================ */
select.form-select {
    background: #1f1f35;
    color: #ffffff;
    border: 1px solid #3c3c5c;
    padding: 8px 36px 8px 12px;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M1.5 5.5l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 10px;
}

/* Hover */
select.form-select:hover {
    border-color: #f6a623;
}

/* Focus */
select.form-select:focus {
    outline: none;
    border-color: #f6a623;
    box-shadow: 0 0 0 3px rgba(246,166,35,0.25);
}

/* Dropdown options */
select.form-select option {
    background: #1f1f35;
    color: #ffffff;
}

	
		/* ===== RESPONSIVE ===== */
		@media (max-width: 900px) {
			table {
				font-size: 13px;
			}

			td,
			th {
				padding: 12px 10px;
			}
		}

		/* ===== MAIN CONTENT SPACING FIX ===== */
		.main-content {
			margin-left: 260px;
			padding: 0;
			transition: margin-left 0.3s ease;
		}

		body.sidebar-collapsed .main-content {
			margin-left: 80px;
		}

		/* ===== DASHBOARD FULL WIDTH ===== */
		.dashboard.full-width {
			padding: 0;
			margin-top: 0;
		}

		/* ===== CARD SHOULD FILL PAGE ===== */
		.dashboard.full-width .card {
			border-radius: 0;
			box-shadow: none;
			padding: 24px 30px;
			min-height: calc(100vh - 90px);
			/* fills screen below header */
		}

		/* ===== REMOVE EXTRA TOP GAP ===== */
		.header-divider {
			margin-bottom: 0;
		}
	</style>
</head>

<body class="sidebar-collapsed">
	<aside class="sidebar collapsed">
		<div class="sidebar-logo">
			<img th:src="@{/images/logo.png}" alt="EduPlatform Logo">
			<span class="logo-text">EduPlatform</span>
		</div>

		<nav class="sidebar-menu">
			<a th:href="@{/teacher-dashboard}"><i class="bi bi-speedometer2"></i><span> Dashboard </span></a>
			<a th:href="@{/teacher-course}"><i class="bi bi-journal-text"></i><span>Course Management</span></a>
			<a th:href="@{/teacher-creates-course}"><i class="bi bi-journal-plus"></i><span>Create Course</span></a>
			<a th:href="@{/teacher-activity}"><i class="bi bi-pencil-square"></i><span>Genereal Activities</span></a>
			<a th:href="@{/teacher-students}" class="active"><i class="bi bi-people"></i><span>Students</span></a>
			<a th:href="@{/teacher-communication}"><i class="bi bi-chat-dots"></i><span>Communication</span></a>
			<a th:href="@{/teacher-feedback}"><i class="bi bi-star"></i><span>Feedback & Ratings</span></a>
			<a th:href="@{/teacher-profile}"><i class="bi bi-gear"></i><span>Profile</span></a>
			<a th:href="@{/logout}" class="logout"><i class="bi bi-box-arrow-right"></i><span>Logout</span></a>
		</nav>
	</aside>

	<!-- ===== MAIN CONTENT ===== -->
	<main class="main-content">
		<!-- ===== TOP HEADER ===== -->
		<header class="top-header">
			<div class="header-left">
				<button class="sidebar-toggle" id="sidebarToggle">
					<i class="bi bi-list"></i>
				</button>

				<span class="page-title">Enrolled In Your Courses</span>
			</div>

			<div class="header-right">
				<div class="profile-trigger" id="profileToggle">
					<span th:text="${teacher.firstname + ' ' + teacher.lastname}">
						Dishank
					</span>
					<div class="avatar">
						<i class="bi bi-person-fill"></i>
					</div>
					<i class="bi bi-caret-down-fill"></i>
				</div>


				<div class="profile-dropdown" id="profileDropdown">
					<a th:href="@{/teacher-profile}">Profile</a>
					<a href="@{/logout}">Logout</a>
				</div>
			</div>
		</header>

		<hr class="header-divider">
		<div class="dashboard full-width">

			<div class="card" style="background:#fff;border-radius:12px;padding:20px">

				<table>
					<thead>
						<tr>
							<th>Student</th>
							<th>Course</th>
							<th>Enrolled On</th>
							<th>Finished On</th>
							<th>Status</th>
							<th>Action</th>
						</tr>
					</thead>

					<tbody>
						<tr th:each="e : ${enrollments}">

							<!-- Student -->
							<td>
								<strong th:text="${e.student.fullname}">Student Name</strong><br>
								<small th:text="${e.student.email}" style="color:#6b7280">
									email@example.com
								</small>
							</td>

							<!-- Course -->
							<td th:text="${e.course.title}">Course Title</td>

							<!-- Date -->
							<td th:text="${#temporals.format(e.enrolledAt,'dd MMM yyyy')}">
							</td>

							<td>
								<span th:if="${e.completedAt != null}"
									th:text="${#temporals.format(e.completedAt,'dd MMM yyyy')}" class="status-complete">
								</span>

								<span th:if="${e.completedAt == null}" class="status-progress">
									In Progress
								</span>
							</td>
							<td>
								<form th:action="@{/teacher/enrollment/status/{id}(id=${e.enrollmentId})}"
									method="post">

									<select name="status" class="form-select form-select-sm"
										onchange="this.form.submit()">

										<option value="ACTIVE"
											th:selected="${e.status == T(com.example.demo.enums.EnrollmentStatus).ACTIVE}">
											Active
										</option>

										<option value="SUSPENDED"
											th:selected="${e.status == T(com.example.demo.enums.EnrollmentStatus).SUSPENDED}">
											Suspended
										</option>

										<option value="BLOCKED"
											th:selected="${e.status == T(com.example.demo.enums.EnrollmentStatus).BLOCKED}">
											Blocked
										</option>

									</select>
								</form>
							</td>
							<td>
								message
							</td>

						</tr>

						<tr th:if="${enrollments.isEmpty()}">
							<td colspan="5" style="text-align:center;color:#6b7280;padding:20px">
								No students enrolled yet.
							</td>
						</tr>

					</tbody>
				</table>

			</div>
		</div>

	</main>
	<script>

		const toggleBtn = document.getElementById("sidebarToggle");
		const sidebar = document.querySelector(".sidebar");

		const body = document.body;

		toggleBtn.addEventListener("click", () => {
			sidebar.classList.toggle("collapsed");
			body.classList.toggle("sidebar-collapsed");
		});


		const profileToggle = document.getElementById("profileToggle");
		const profileDropdown = document.getElementById("profileDropdown");

		if (profileToggle) {
			profileToggle.addEventListener("click", () => {
				profileDropdown.classList.toggle("show");
			});

			document.addEventListener("click", (e) => {
				if (!profileToggle.contains(e.target)) {
					profileDropdown.classList.remove("show");
				}
			});
		}
	</script>

</body>

</html>