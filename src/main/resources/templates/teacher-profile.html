<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Teacher Profile</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" th:href="@{/css/teacher-css/teacher-style.css}">
    <link rel="stylesheet" th:href="@{/css/teacher-css/teacher-sidebar.css}">
    <style>
    .hidden {
    display: none;
}

.edit-profile-btn {
    margin-top: 15px;
    padding: 10px 22px;
    border-radius: 25px;
    border: none;
    background: #f6a623;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s;
}

.edit-profile-btn:hover {
    background: #ffb347;
}

/* Optional nice animation */
.teacher-profile-form {
    animation: fadeSlide 0.4s ease;
}

@keyframes fadeSlide {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
    
    .readonly-field {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.edit-link {
  background: none;
  border: none;
  color: #f6a623;
  font-weight: 600;
  cursor: pointer;
  font-size: 13px;
}
    /* ===== CONTACT INFO CARD ===== */
.contact-info-card {
  background: #ffffff;
  border-radius: 16px;
  padding: 25px 30px;
  margin-bottom: 35px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.06);
}

/* each row */
.contact-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 0;
}

.contact-row:not(:last-child) {
  border-bottom: 1px solid #eee;
}

/* text block */
.contact-text {
  display: flex;
  flex-direction: column;
}

.contact-label {
  font-size: 13px;
  color: #777;
  margin-bottom: 4px;
}

.contact-value {
  font-size: 15px;
  font-weight: 500;
  color: #1f1f2e;
}

/* edit button */
.edit-link {
  background: none;
  border: none;
  color: #f6a623;
  font-weight: 600;
  cursor: pointer;
  font-size: 14px;
  padding: 6px 10px;
  border-radius: 6px;
  transition: background 0.2s ease;
}

.edit-link:hover {
  background: rgba(246, 166, 35, 0.12);
}
    
    
    
    
    .sidebar.collapsed ~ .main-content {
    margin-left: 100px;
}
    </style>
</head>

<body class="sidebar-collapsed">

<!-- ===== SIDEBAR ===== -->
<aside class="sidebar collapsed">
    <div class="sidebar-logo">
        <img th:src="@{/images/logo.png}" alt="EduPlatform Logo">
        <span class="logo-text">EduPlatform</span>
    </div>

    <nav class="sidebar-menu">
        <a th:href="@{/teacher-dashboard}">
            <i class="bi bi-speedometer2"></i><span>Dashboard</span>
        </a>

        <a th:href="@{/teacher-course}">
            <i class="bi bi-journal-bookmark"></i><span>Course Management</span>
        </a>


		<a th:href="@{/teacher-creates-course}">
	        <i class="bi bi-journal-bookmark"></i><span>Create Course</span></a>
	    
        <a th:href="@{/teacher-exams}">
            <i class="bi bi-pencil-square"></i><span>Exams</span>
        </a>

        <a th:href="@{/teacher-students}">
            <i class="bi bi-people"></i><span>Students</span>
        </a>

        <a th:href="@{/teacher-communication}">
            <i class="bi bi-chat-dots"></i><span>Communication</span>
        </a>

        <a th:href="@{/teacher-feedback}">
            <i class="bi bi-star"></i><span>Feedback & Ratings</span>
        </a>

        <a th:href="@{/teacher-profile}" class="active">
            <i class="bi bi-gear"></i><span>Profile</span>
        </a>

        <a th:href="@{/logout}" class="logout">
            <i class="bi bi-box-arrow-right"></i><span>Logout</span>
        </a>
    </nav>
</aside>

<!-- ===== MAIN CONTENT ===== -->
<main class="main-content">
    <button class="sidebar-toggle" id="sidebarToggle">☰</button>

<header class="page-header">
	<h1>Settings</h1>
</header>
<!-- ===== TEACHER PROFILE ===== -->
<section class="teacher-profile-wrapper">


    <!-- PROFILE CARD -->
    <div class="teacher-profile-card">
        <div class="teacher-photo">
            <img th:src="@{/images/default.jpg}" alt="Teacher Profile">
            <label class="photo-upload">
                Change Photo
                <input type="file" hidden>
            </label>
        </div>

        <h2 class="teacher-name"
    th:text="${teacher.firstname + ' ' + teacher.lastname}">
</h2>

        <p class="teacher-role">Educator · EduPlatform</p>
        
        <button class="edit-profile-btn" id="editProfileBtn">
    <i class="bi bi-pencil"></i> Edit Profile
</button>
        
    </div>



    <!-- PROFILE FORM -->
    <form class="teacher-profile-form hidden"
      th:action="@{/teacher-profile}"
      method="post"
      th:object="${profile}">


        <div class="form-group">
            <label>Full Name</label>
           <input type="text"
       th:value="${teacher.firstname + ' ' + teacher.lastname}"
       placeholder="Enter full name"
       >
        </div>

        <div class="form-group">
            <label>Qualification</label>
            <input type="text" th:field="*{qualification}" placeholder="e.g. M.Sc, B.Ed, PhD">

        </div>

        <div class="form-group">
            <label>Specialist</label>
            <input type="text" th:field="*{specialist}" placeholder="e.g. Mathematics, Physics">
        </div>

        <div class="form-group">
            <label>Experience (Years)</label>
            <input type="number" placeholder="e.g. 5" th:field="*{experience}">
        </div>

        <div class="form-group">
            <label>Bio</label>
            <textarea rows="4" placeholder="Short bio about you"></textarea>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="profile-actions">
            <button type="button" class="cancel-btn">Cancel Changes</button>
            <button type="submit" class="save-btn">Save Changes</button>
        </div>

        <!-- PASSWORD LINK -->
        <p class="password-link">
            Want to update your password?
            <a href="#" id="openPassword">Change Password</a>
        </p>
    </form>
</section>
<!-- ===== CHANGE PASSWORD MODAL ===== -->
<div id="passwordModal" class="modal">

    <div class="modal-content">
        <span class="close-btn" id="closePasswordModal">&times;</span>

        <h2>Change Password</h2>
        

        <form>
            <div class="form-group">
                <label>Current Password</label>
                <input type="password" placeholder="Enter current password">
            </div>

            <div class="form-group">
                <label>New Password</label>
                <input type="password" placeholder="Enter new password">
            </div>

            <div class="form-group">
                <label>Confirm New Password</label>
                <input type="password" placeholder="Confirm new password">
            </div>
<p class="modal-subtext">
            Forgot your password?
            <a href="#">Reset it securely</a>
        </p>
            <div class="profile-actions">
                <button type="button" class="cancel-btn" id="cancelPassword">
                    Cancel
                </button>
                <button type="submit" class="save-btn">
                    Update Password
                </button>
            </div>
            
        </form>
    </div>
</div>


<div class="contact-info-card">

  <div class="contact-row">
    <div class="contact-text">
      <span class="contact-label">Email</span>
      <span class="contact-value" th:text="${teacher.email}"></span>
    </div>
    <button class="edit-link" id="openEmailModal">Edit Email</button>
  </div>

  <div class="contact-row">
    <div class="contact-text">
      <span class="contact-label">Phone</span>
      <span class="contact-value" th:text="${teacher.phoneno}"></span>
    </div>
    <button class="edit-link" id="openPhoneModal">Edit Phone</button>
  </div>

</div>

<!-- ===== EDIT EMAIL MODAL ===== -->
<div id="emailModal" class="modal">

  <div class="modal-content">
    <span class="close-btn" id="closeEmailModal">&times;</span>

    <h2>Change Email</h2>

    <form th:action="@{/teacher-update-email}" method="post">

      <div class="form-group">
        <label>New Email</label>
        <input type="email" name="email" required>
      </div>

      <div class="profile-actions">
        <button type="button" class="cancel-btn" id="cancelEmail">
          Cancel
        </button>
        <button type="submit" class="save-btn">
          Update Email
        </button>
      </div>

    </form>
  </div>
</div>


<!-- ===== EDIT PHONE MODAL ===== -->
<div id="phoneModal" class="modal">

  <div class="modal-content">
    <span class="close-btn" id="closePhoneModal">&times;</span>

    <h2>Change Phone</h2>

    <form th:action="@{/teacher-update-phone}" method="post">

      <div class="form-group">
        <label>New Phone Number</label>
        <input type="text" name="phoneno" required>
      </div>

      <div class="profile-actions">
        <button type="button" class="cancel-btn" id="cancelPhone">
          Cancel
        </button>
        <button type="submit" class="save-btn">
          Update Phone
        </button>
      </div>

    </form>
  </div>
</div>

</main>

<script th:src="@{/javascript/teacher-js/teacher.js}"></script>
<script>
const editBtn = document.getElementById("editProfileBtn");
const profileForm = document.querySelector(".teacher-profile-form");
const cancelBtn = document.querySelector(".cancel-btn");

editBtn.addEventListener("click", () => {
    profileForm.classList.remove("hidden");
    editBtn.style.display = "none";
});

cancelBtn.addEventListener("click", () => {
    profileForm.classList.add("hidden");
    editBtn.style.display = "inline-block";
});


</script>
<script>
document.addEventListener("DOMContentLoaded", () => {

	  /* ===== EMAIL MODAL ===== */
	  const openEmail = document.getElementById("openEmailModal");
	  const emailModal = document.getElementById("emailModal");
	  const closeEmail = document.getElementById("closeEmailModal");
	  const cancelEmail = document.getElementById("cancelEmail");

	  openEmail?.addEventListener("click", () => {
	    emailModal.classList.add("show");
	  });

	  function closeEmailModal() {
	    emailModal.classList.remove("show");
	  }

	  closeEmail?.addEventListener("click", closeEmailModal);
	  cancelEmail?.addEventListener("click", closeEmailModal);


	  /* ===== PHONE MODAL ===== */
	  const openPhone = document.getElementById("openPhoneModal");
	  const phoneModal = document.getElementById("phoneModal");
	  const closePhone = document.getElementById("closePhoneModal");
	  const cancelPhone = document.getElementById("cancelPhone");

	  openPhone?.addEventListener("click", () => {
	    phoneModal.classList.add("show");
	  });

	  function closePhoneModal() {
	    phoneModal.classList.remove("show");
	  }

	  closePhone?.addEventListener("click", closePhoneModal);
	  cancelPhone?.addEventListener("click", closePhoneModal);

	});
</script>

</body>
</html>